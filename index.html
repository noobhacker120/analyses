<!--
UI: DeepSeek (UNCHANGED)
Logic: Clean Pattern Engine (FIXED)
No random result
Real API based validation
-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WinGo DeepSeek AI – Stable Pattern Engine</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* ========= DEEPSEEK UI – UNCHANGED ========= */
:root{
--bg:#0f172a;
--card:#1e293b;
--accent:#3b82f6;
--green:#10b981;
--red:#ef4444;
--text:#e5e7eb;
--muted:#94a3b8;
}
body{
background:linear-gradient(135deg,#0f172a,#1e1b4b);
color:var(--text);
font-family:Segoe UI,system-ui;
padding:20px;
}
.container{max-width:1400px;margin:auto}
.header,.card,.history{background:rgba(30,41,59,.85);border-radius:16px;padding:20px;margin-bottom:20px}
.header h1{color:var(--accent)}
.controls{display:flex;gap:10px;flex-wrap:wrap}
select,button{padding:10px 18px;border-radius:10px;border:none;background:#0f172a;color:white}
button.primary{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}
.period{font-size:52px;color:#3b82f6;font-weight:900;text-align:center}
.dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px}
.prediction{font-size:36px;font-weight:800;text-align:center}
.big{color:var(--green)}
.small{color:var(--red)}
.red{color:var(--red)}
.green{color:var(--green)}
.bar{height:8px;background:#111827;border-radius:4px;overflow:hidden;margin:10px 0}
.fill{height:100%;background:linear-gradient(90deg,#10b981,#3b82f6)}
.stats{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.stat{background:#0f172a;padding:10px;border-radius:10px;text-align:center}
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #334155;font-size:14px}
.correct{color:var(--green)}
.incorrect{color:var(--red)}
.waiting{color:#f59e0b}
/* ========================================= */
</style>
</head>

<body>
<div class="container">

<div class="header">
<h1><i class="fas fa-brain"></i> WinGo DeepSeek AI</h1>
<div class="controls">
<select id="market">
<option value="30">30s Market</option>
<option value="60">1m Market</option>
</select>
<button class="primary" onclick="loadData()">Refresh</button>
<div id="timer">--</div>
</div>
</div>

<div class="card">
<div class="period" id="period">--</div>
<div style="text-align:center;color:var(--muted)">Running Period</div>
</div>

<div class="dashboard">

<div class="card">
<h3>Big / Small</h3>
<div class="prediction" id="bs">--</div>
<div class="bar"><div class="fill" id="bsBar"></div></div>
<div style="text-align:center">Confidence <span id="bsConf">0%</span></div>
</div>

<div class="card">
<h3>Color</h3>
<div class="prediction" id="color">--</div>
<div class="bar"><div class="fill" id="cBar"></div></div>
<div style="text-align:center">Confidence <span id="cConf">0%</span></div>
</div>

<div class="card">
<h3>Combined</h3>
<div class="prediction" id="combo">--</div>
<div id="rec" style="text-align:center;color:var(--muted)"></div>
</div>

</div>

<div class="history">
<h3>Prediction vs Actual (Last 10)</h3>
<table>
<thead>
<tr>
<th>Period</th>
<th>Big / Small</th>
<th>Color</th>
</tr>
</thead>
<tbody id="history"></tbody>
</table>
</div>

</div>

<script>
/* ========== CLEAN PATTERN ENGINE ========== */

const API={
30:'https://draw.ar-lottery01.com/WinGo/WinGo_30S/GetHistoryIssuePage.json',
60:'https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json'
};

const STORE='deepseek_engine_v1';
let history=JSON.parse(localStorage.getItem(STORE)||'[]');

async function loadData(){
const m=document.getElementById('market').value;
const url='https://api.allorigins.win/raw?url='+encodeURIComponent(API[m]+'?pageSize=100&pageNo=1');
const r=await fetch(url);
const j=await r.json();
const list=j.data.list;

list.sort((a,b)=>b.issueNumber.localeCompare(a.issueNumber));

const running=(BigInt(list[0].issueNumber)+1n).toString();
document.getElementById('period').textContent=running;

const past=list.slice(1,51);

let B=0,S=0,R=0,G=0;
past.forEach(d=>{
const n=parseInt(d.number);
if(n>=5)B++;else S++;
if(d.color.includes('red'))R++;
if(d.color.includes('green'))G++;
});

const bs=B>=S?'BIG':'SMALL';
const color=R>=G?'RED':'GREEN';

const bsConf=Math.min(95,50+Math.abs(B-S));
const cConf=Math.min(95,50+Math.abs(R-G));

document.getElementById('bs').textContent=bs;
document.getElementById('bs').className='prediction '+bs.toLowerCase();
document.getElementById('bsBar').style.width=bsConf+'%';
document.getElementById('bsConf').textContent=bsConf+'%';

document.getElementById('color').textContent=color;
document.getElementById('color').className='prediction '+color.toLowerCase();
document.getElementById('cBar').style.width=cConf+'%';
document.getElementById('cConf').textContent=cConf+'%';

document.getElementById('combo').textContent=bs[0]+color[0];
document.getElementById('rec').textContent=
(bsConf+cConf)/2>=70?'GOOD SIGNAL':'WAIT';

savePrediction(running,bs,color,list[0]);
renderHistory();
}

function savePrediction(period,bs,color,lastDraw){
if(history.find(h=>h.period===period))return;

const actualBS=parseInt(lastDraw.number)>=5?'BIG':'SMALL';
const actualColor=lastDraw.color.includes('red')?'RED':'GREEN';

history.unshift({
period,
bs:`${bs} / ${actualBS}`,
color:`${color} / ${actualColor}`,
bsOk:bs===actualBS,
cOk:color===actualColor
});

history=history.slice(0,10);
localStorage.setItem(STORE,JSON.stringify(history));
}

function renderHistory(){
const t=document.getElementById('history');
t.innerHTML='';
history.forEach(h=>{
t.innerHTML+=`
<tr>
<td>${h.period}</td>
<td class="${h.bsOk?'correct':'incorrect'}">${h.bs}</td>
<td class="${h.cOk?'correct':'incorrect'}">${h.color}</td>
</tr>`;
});
}

loadData();
</script>
</body>
</html>
