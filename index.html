<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Noob Hacker – Market Pattern Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
 margin:0;
 font-family:system-ui,-apple-system;
 background:radial-gradient(circle at top,#1b2a40,#050712 70%);
 color:#eaf1ff;
}
header{padding:14px;border-bottom:1px solid rgba(255,255,255,.08)}
.title{font-size:18px;font-weight:600;margin-bottom:6px}
.topbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between}
select,button{
 background:#0d1a33;color:#fff;border:1px solid #2f4b8f;
 border-radius:8px;padding:6px 12px;cursor:pointer
}
.status{display:flex;gap:10px;font-size:12px}
.dot{width:10px;height:10px;border-radius:50%;display:inline-block}
.green{background:#4dff88}
.red{background:#ff5252}
.gray{background:#777}

.container{padding:14px;display:grid;gap:14px}
.card{background:rgba(255,255,255,.06);border-radius:14px;padding:14px}
h3{margin:0 0 10px;font-size:15px}
.row{display:flex;justify-content:space-between;font-size:14px;margin:6px 0}
.bar{height:8px;background:#222;border-radius:6px;overflow:hidden}
.fill{height:100%;background:#4fa3ff}
.greenfill{background:#4dff88}
.redfill{background:#ff5252}

.biasText{font-size:18px;font-weight:700;text-align:center}
.sub{font-size:12px;opacity:.7;text-align:center;margin-top:4px}

.table{
 font-size:13px;
 display:grid;
 grid-template-columns:80px 1fr 1fr 80px;
 gap:6px;
}
.cell{
 background:rgba(0,0,0,.25);
 padding:6px;
 border-radius:6px;
 text-align:center
}
.match{color:#4dff88}
.miss{color:#ff5252}
.wait{color:#ffc107}

footer{text-align:center;font-size:12px;opacity:.6;margin:12px}
</style>
</head>

<body>

<header>
 <div class="title">Noob Hacker – Market Pattern Dashboard</div>
 <div class="topbar">
  <select id="market">
   <option value="30">30 Second Market</option>
   <option value="60">1 Minute Market</option>
  </select>

  <button onclick="manualRefresh()">Manual Refresh</button>
  <div id="countdown">Remaining: --</div>

  <div class="status">
   <span><i class="dot" id="netDot"></i> Net</span>
   <span><i class="dot" id="apiDot"></i> API</span>
  </div>
 </div>
</header>

<div class="container">

 <div class="card">
  <h3>Running Period</h3>
  <div class="biasText" id="runningPeriod">--</div>
 </div>

 <div class="card">
  <h3>Big / Small Bias</h3>
  <div class="biasText" id="bsBias">--</div>
  <div class="sub" id="bsFlip">Flip chance: --</div>
 </div>

 <div class="card">
  <h3>Color Bias</h3>
  <div class="biasText" id="colorBias">--</div>
  <div class="sub" id="colorFlip">Flip chance: --</div>
 </div>

 <div class="card">
  <h3>Prediction vs Actual (Last 10)</h3>
  <div class="table" id="pvTable">
   <div class="cell"><b>Period</b></div>
   <div class="cell"><b>Script BS</b></div>
   <div class="cell"><b>Actual BS</b></div>
   <div class="cell"><b>Result</b></div>
  </div>
 </div>

</div>

<footer>
Pattern-based observation only • Credit: Noob Hacker
</footer>

<script>
const API_30="https://draw.ar-lottery01.com/WinGo/WinGo_30S/GetHistoryIssuePage.json";
const API_60="https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json";
const PROXY ="https://signal.chat31525.workers.dev/?url=";

let timer,countTimer;
let memory=[]; // prediction memory

function setDot(id,c){document.getElementById(id).className="dot "+c}
function manualRefresh(){clearTimers();loadData()}
function clearTimers(){clearTimeout(timer);clearInterval(countTimer)}

async function loadData(){
 setDot("netDot",navigator.onLine?"green":"red");
 setDot("apiDot","gray");

 const sec=document.getElementById("market").value;
 const API=sec==="30"?API_30:API_60;
 const url=API+"?pageSize=500&pageNo=1";

 try{
  const res=await fetch(PROXY+encodeURIComponent(url));
  const json=await res.json();
  if(json.code!==0||!json.data?.list?.length)throw 1;

  setDot("apiDot","green");
  processData(json.data.list);
  scheduleNext(sec);
 }catch{
  setDot("apiDot","red");
 }
}

function scheduleNext(sec){
 clearTimers();
 const base=sec*1000;
 const delay=base-(Date.now()%base)+200;
 startCountdown(delay);
 timer=setTimeout(loadData,delay);
}

function startCountdown(ms){
 let s=Math.floor(ms/1000);
 document.getElementById("countdown").textContent="Remaining: "+s+"s";
 countTimer=setInterval(()=>{
  s--;
  document.getElementById("countdown").textContent="Remaining: "+s+"s";
  if(s<=0)clearInterval(countTimer);
 },1000);
}

function processData(list){
 const latest=list[0];
 const running=(BigInt(latest.issueNumber)+1n).toString();
 document.getElementById("runningPeriod").textContent=running;

 // ---- pattern analysis (500 history)
 let bs=[],color=[];
 list.forEach(r=>{
  const n=+r.number;
  bs.push(n>=5?"Big":"Small");
  color.push(n===0||n===5?"Violet":(n%2?"Green":"Red"));
 });

 const recent=bs.slice(0,50);
 const bigRate=recent.filter(x=>x==="Big").length/recent.length;
 const flips=recent.filter((v,i)=>i&&v!==recent[i-1]).length/recent.length;

 let bias=(bigRate-0.5) - flips*0.3;
 bias=Math.max(-0.3,Math.min(0.3,bias));

 const bigPct=Math.round((0.5+bias)*100);
 const smallPct=100-bigPct;
 const flipBS=Math.round(flips*100);

 document.getElementById("bsBias").textContent=
  bigPct>=smallPct?`Big ${bigPct}%`:`Small ${smallPct}%`;
 document.getElementById("bsFlip").textContent=
  `Flip chance: ${flipBS}%`;

 // color
 const cRecent=color.slice(0,50);
 const gRate=cRecent.filter(x=>x==="Green").length/cRecent.length;
 const cFlips=cRecent.filter((v,i)=>i&&v!==cRecent[i-1]).length/cRecent.length;

 let cBias=(gRate-0.5)-cFlips*0.25;
 cBias=Math.max(-0.3,Math.min(0.3,cBias));

 const gPct=Math.round((0.5+cBias)*100);
 const rPct=100-gPct;

 document.getElementById("colorBias").textContent=
  gPct>=rPct?`Green ${gPct}%`:`Red ${rPct}%`;
 document.getElementById("colorFlip").textContent=
  `Flip chance: ${Math.round(cFlips*100)}%`;

 // ----- prediction memory (no duplicate)
 if(!memory.find(m=>m.period===running)){
  memory.unshift({
   period:running,
   predBS:bigPct>=smallPct?"Big":"Small",
   actual:"WAIT"
  });
 }

 // ----- update actual from closed results
 list.slice(0,10).forEach(r=>{
  const p=r.issueNumber;
  const actualBS=(+r.number>=5)?"Big":"Small";
  const m=memory.find(x=>x.period===p);
  if(m&&m.actual==="WAIT")m.actual=actualBS;
 });

 memory=memory.slice(0,10);
 renderTable();
}

function renderTable(){
 const t=document.getElementById("pvTable");
 t.innerHTML=`
  <div class="cell"><b>Period</b></div>
  <div class="cell"><b>Script BS</b></div>
  <div class="cell"><b>Actual BS</b></div>
  <div class="cell"><b>Result</b></div>
 `;
 memory.forEach(m=>{
  let res="WAIT",cls="wait";
  if(m.actual!=="WAIT"){
   res=m.predBS===m.actual?"MATCH":"MISS";
   cls=res==="MATCH"?"match":"miss";
  }
  t.innerHTML+=`
   <div class="cell">${m.period.slice(-5)}</div>
   <div class="cell">${m.predBS}</div>
   <div class="cell">${m.actual}</div>
   <div class="cell ${cls}">${res}</div>
  `;
 });
}

loadData();
</script>

</body>
</html>
