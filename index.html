<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Noob Hacker – Clean Pattern Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system;
  background:radial-gradient(circle at top,#1b2a40,#050712 70%);
  color:#eaf1ff;
}
header{
  padding:14px;
  border-bottom:1px solid rgba(255,255,255,.08)
}
.title{
  font-size:18px;
  font-weight:600;
  margin-bottom:8px
}
.topbar{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  align-items:center;
  justify-content:space-between
}
select,button{
  background:#0d1a33;
  color:#fff;
  border:1px solid #2f4b8f;
  border-radius:8px;
  padding:6px 12px;
  cursor:pointer
}
.container{
  padding:14px;
  display:grid;
  gap:14px
}
.card{
  background:rgba(255,255,255,.06);
  border-radius:14px;
  padding:14px
}
h3{margin:0 0 10px;font-size:15px}
.row{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  margin:6px 0
}
.history-row{
  display:flex;
  justify-content:space-between;
  padding:6px 8px;
  background:rgba(0,0,0,.25);
  border-radius:6px;
  margin-bottom:4px
}
.match{color:#4dff88}
.miss{color:#ff5252}
.wait{color:#ffc107}
footer{
  text-align:center;
  font-size:12px;
  opacity:.6;
  margin:12px
}
</style>
</head>

<body>

<header>
  <div class="title">Noob Hacker – Clean Pattern Engine</div>
  <div class="topbar">
    <select id="market">
      <option value="30">30 Second Market</option>
      <option value="60">1 Minute Market</option>
    </select>
    <button onclick="manualRefresh()">Manual Refresh</button>
    <div id="countdown">--</div>
  </div>
</header>

<div class="container">

  <div class="card">
    <h3>Running Period</h3>
    <div class="row">
      <span>Current</span>
      <span id="runningPeriod">--</span>
    </div>
  </div>

  <div class="card">
    <h3>Prediction (Pattern Based)</h3>
    <div class="row"><span>Big / Small</span><span id="predBS">WAIT</span></div>
    <div class="row"><span>Flip %</span><span id="flipBS">--</span></div>
    <div class="row"><span>Color</span><span id="predColor">WAIT</span></div>
    <div class="row"><span>Flip %</span><span id="flipColor">--</span></div>
  </div>

  <div class="card">
    <h3>Prediction vs Actual (Last 10)</h3>
    <div id="pvshistory">--</div>
  </div>

  <div class="card">
    <h3>Last 10 Market History</h3>
    <div id="history">--</div>
  </div>

</div>

<footer>
Pattern-based analysis only • Not guaranteed • Credit: Noob Hacker
</footer>

<script>
/* ================= CONFIG ================= */
const API_30 = "https://draw.ar-lottery01.com/WinGo/WinGo_30S/GetHistoryIssuePage.json";
const API_60 = "https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json";
const PROXY  = "https://signal.chat31525.workers.dev/?url=";

/* ============== STORAGE ================== */
let predictions = JSON.parse(localStorage.getItem("nh_predictions")||"[]");

/* ============== HELPERS ================== */
const BS = n => n>=5?"Big":"Small";
const COLOR = c => c.includes("red")?"Red":"Green";

function manualRefresh(){
  loadData();
}

async function loadData(){
  const m = document.getElementById("market").value;
  const API = m==="30"?API_30:API_60;
  const url = PROXY+encodeURIComponent(API+"?pageSize=500&pageNo=1");

  const res = await fetch(url);
  const json = await res.json();
  const list = json.data.list;

  const running = (BigInt(list[0].issueNumber)+1n).toString();
  document.getElementById("runningPeriod").textContent = running;

  analyse(list, running);
  renderHistory(list);
  renderPVS(list);
  startCountdown(m);
}

/* ============== CORE LOGIC ================== */
function analyse(list, running){
  const data = list.slice(0,500);

  const bsArr = data.map(r=>BS(+r.number));
  const cArr  = data.map(r=>COLOR(r.color));

  const predBS = patternDecision(bsArr);
  const predC  = patternDecision(cArr);

  document.getElementById("predBS").textContent = predBS.pred;
  document.getElementById("flipBS").textContent = predBS.flip+"%";
  document.getElementById("predColor").textContent = predC.pred;
  document.getElementById("flipColor").textContent = predC.flip+"%";

  if(!predictions.find(p=>p.period===running)){
    predictions.unshift({
      period: running,
      predBS: predBS.pred,
      predColor: predC.pred,
      result:null
    });
    predictions = predictions.slice(0,20);
    localStorage.setItem("nh_predictions",JSON.stringify(predictions));
  }
}

/* ============== PATTERN ENGINE ================== */
function patternDecision(arr){
  const recent = arr.slice(0,20);
  const a = recent.filter(x=>x===recent[0]).length;
  const b = recent.length-a;

  let pred="WAIT";
  if(Math.abs(a-b)>=6){
    pred = a>b ? opposite(recent[0]) : recent[0];
  }

  const flips = recent.filter((v,i)=>i>0 && v!==recent[i-1]).length;
  const flip = Math.round((flips/(recent.length-1))*100);

  return {pred,flip};
}

function opposite(v){
  if(v==="Big")return"Small";
  if(v==="Small")return"Big";
  if(v==="Red")return"Green";
  if(v==="Green")return"Red";
  return"WAIT";
}

/* ============== RENDER ================== */
function renderHistory(list){
  document.getElementById("history").innerHTML =
    list.slice(0,10).map(r=>`
      <div class="history-row">
        <span>${r.issueNumber.slice(-5)}</span>
        <span>${BS(+r.number)} / ${COLOR(r.color)}</span>
      </div>`).join("");
}

function renderPVS(list){
  predictions.forEach(p=>{
    if(p.result) return;
    const actual = list.find(r=>r.issueNumber===p.period);
    if(actual){
      p.result={
        bs: BS(+actual.number),
        color: COLOR(actual.color)
      };
    }
  });
  localStorage.setItem("nh_predictions",JSON.stringify(predictions));

  document.getElementById("pvshistory").innerHTML =
    predictions.slice(0,10).map(p=>{
      let bsClass="wait",cClass="wait";
      if(p.result){
        bsClass = p.predBS===p.result.bs?"match":"miss";
        cClass  = p.predColor===p.result.color?"match":"miss";
      }
      return `
      <div class="history-row">
        <span>${p.period.slice(-5)}</span>
        <span class="${bsClass}">${p.predBS} / ${p.result?p.result.bs:"WAIT"}</span>
        <span class="${cClass}">${p.predColor} / ${p.result?p.result.color:"WAIT"}</span>
      </div>`;
    }).join("");
}

/* ============== TIMER ================== */
function startCountdown(sec){
  clearInterval(window.ct);
  let s = sec;
  document.getElementById("countdown").textContent = s+"s";
  window.ct = setInterval(()=>{
    s--;
    document.getElementById("countdown").textContent = s+"s";
    if(s<=0){
      clearInterval(window.ct);
      loadData();
    }
  },1000);
}

loadData();
</script>

</body>
</html>
